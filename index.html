<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
</head>
<body>

<script type="text/javascript" src="Card.js" ></script>

<script  type="text/javascript" src="TexasPoker.js"></script>

底牌：<br>
<select id="MyCard1_point">
    <option value="0">?</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="MyCard1_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
<select id="MyCard2_point">
    <option value="0">?</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="MyCard2_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
<button onclick="setmycard()">设置底牌</button>
<br>
<div id="mycardset"></div>
<br>
<br>

台面：<br>
第一张牌:
<select id="card1_point">
    <option value="0">不明</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="card1_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
第二张牌:
<select id="card2_point">
    <option value="0">不明</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="card2_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
第三张牌:
<select id="card3_point">
    <option value="0">不明</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="card3_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
第四张牌:
<select id="card4_point">
    <option value="0">不明</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="card4_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>
第五张牌:
<select id="card5_point">
    <option value="0">不明</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">J</option>
    <option value="12">Q</option>
    <option value="13">K</option>
    <option value="14">A</option>
</select>
<select id="card5_variety">
    <option value="0">方片</option>
    <option value="1">红桃</option>
    <option value="2">梅花</option>
    <option value="3">黑桃</option>
</select>
<br>

<button onclick="calc()">帮帮我</button>
<br>
<div id="result"></div>

<script type="text/javascript">

    function mycombination(cards, poker)
    {
        let maxCombination  = -1;

        for (let i = 0; i < cards.length; ++i)
        {
            for (let j = 0; j < cards.length; ++j)
            {
                if (i == j) { continue;}
                for (let k = 0; k < cards.length; ++k)
                {
                    if (i == k || j == k) { continue;}
                    for (let m = 0; m < cards.length; ++m)
                    {
                        if (i == m || j==m || k ==m) { continue;}
                        for (let n = 0; n < cards.length; ++n)
                        {
                            if (i == n || j == n || k == n || m == n) { continue;}
                            let combination = poker.JudgeCombination(cards[i], cards[j], cards[k], cards[m], cards[n]);
                            if (combination > maxCombination)
                            {
                                maxCombination = combination;
                            }
                        }
                    }
                }
            }
        }
        switch (maxCombination)
        {
            case  COMBINATION_ROYALFLUSH : return "皇家同花顺";
            case  COMBINATION_STRAIGHT_FLUSH: return "同花顺";
            case  COMBINATION_FOUR_OF_A_KIND: return "四条";
            case  COMBINATION_FULL_HOUSE : return "葫芦";
            case  COMBINATION_FLUSH: return "同花";
            case  COMBINATION_STRAIGHT: return "顺子";
            case  COMBINATION_THREE_OF_A_KIND: return "三条";
            case  COMBINATION_TOW_PAIR: return "两对";
            case  COMBINATION_PAIR : return "一对";
            case  COMBINATION_HIGH_CARD: return "散牌";
        }
        return "散牌";
    }

    function calc()
    {
        console.log("\n calc()....");
        let i;
        let cardsOnDest = [];
        for (i = 1; i <= 5; ++i)
        {
            let id = "card"+i+"_point";
            let myselect = document.getElementById(id);
            let index = myselect.selectedIndex;
            let point = myselect.options[index].value;
            if (point < 2)
            {
                break;
            }
            id = "card"+i+"_variety";
            myselect = document.getElementById(id);
            index = myselect.selectedIndex;
            let  variety = myselect.options[index].value;
            let card = new Card(point, variety);
            cardsOnDest.push(card);
        }

        poker = new TexasPoker();
        let result = "";
        if (cardsOnDest.length == 3)
        {
            result = poker.ThreeCardOnDest(cardsOnDest[0], cardsOnDest[1], cardsOnDest[2]);
        }
        else if (cardsOnDest.length == 4)
        {
            result = poker.FourCardOnDest(cardsOnDest[0], cardsOnDest[1], cardsOnDest[2], cardsOnDest[3]);
        }
        else if (cardsOnDest.length == 5)
        {
            result = poker.FiveCardOnDest(cardsOnDest[0], cardsOnDest[1], cardsOnDest[2], cardsOnDest[3], cardsOnDest[4]);
        }
        let showResult = document.getElementById("result");
        showResult.innerText = result;

        cardsOnDest.push(g_mycard1);
        cardsOnDest.push(g_mycard2);
        let myresult = mycombination(cardsOnDest, poker);
        showResult = document.getElementById("mycardset");
        showResult.innerText = myresult;

    }
    let g_mycard1 = null;
    let g_mycard2 = null;
    function setmycard()
    {
        let myselect = document.getElementById("MyCard1_point");
        let index = myselect.selectedIndex;
        let point = myselect.options[index].value;
        myselect = document.getElementById("MyCard1_variety");
        index = myselect.selectedIndex;
        let  variety = myselect.options[index].value;
        g_mycard1 = new Card(point, variety);

        myselect = document.getElementById("MyCard2_point");
        index = myselect.selectedIndex;
        point = myselect.options[index].value;
        myselect = document.getElementById("MyCard2_variety");
        index = myselect.selectedIndex;
        variety = myselect.options[index].value;
        g_mycard2 = new Card(point, variety);

        let showResult = document.getElementById("mycardset");
        showResult.innerText = "底牌设置好了";
    }



</script>


</body>
</html>